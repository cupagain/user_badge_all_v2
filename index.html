<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>SWAG DIAMOND ELITE</title>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@800;900&family=Noto+Sans+TC:wght@500;700;900&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg: #060608;
            --teal: #00d2be;
            --teal-glow: rgba(0, 210, 190, 0.5);
            --gold: linear-gradient(90deg, #ffe57e, #ffcc00, #ff9500);
            --card-bg: rgba(255, 255, 255, 0.04);
            --border: rgba(255, 255, 255, 0.08);
            --text-main: #FFFFFF;
            --text-dim: #929292;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { background: var(--bg); color: var(--text-main); font-family: 'Noto Sans TC', sans-serif; overflow-x: hidden; padding-bottom: 50px; }

        /* 背景微光 */
        .glow-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at 50% -15%, rgba(0, 210, 190, 0.18) 0%, transparent 60%);
            z-index: -1;
        }

        /* 標題與月份 */
        .header { text-align: center; padding: 35px 0 20px; }
        .header h1 { 
            font-size: 30px; font-weight: 900; letter-spacing: -1px; 
            background: linear-gradient(to bottom, #fff 40%, #888);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }
        
        .month-row { display: flex; align-items: center; justify-content: center; gap: 12px; margin-top: 12px; }
        .month-box { 
            background: rgba(0, 210, 190, 0.05); border: 2.5px solid var(--teal); 
            padding: 5px 18px; border-radius: 12px; color: var(--teal);
            font-family: 'Montserrat', sans-serif; font-size: 24px; font-weight: 900;
            box-shadow: 0 0 25px var(--teal-glow);
        }
        .sub-title { font-size: 18px; color: var(--text-dim); font-weight: 700; letter-spacing: 1px; }

        /* 數據看板 - 統一視覺邊框 */
        .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; padding: 0 20px 25px; }
        .stat-card {
            background: rgba(255, 255, 255, 0.03); 
            border: 2px solid var(--teal); /* 統一边框颜色 */
            box-shadow: 0 10px 25px var(--teal-glow); /* 統一發光顏色 */
            border-radius: 24px; padding: 22px 10px;
            text-align: center; backdrop-filter: blur(20px);
        }
        .stat-label { font-size: 14px; color: var(--text-dim); font-weight: 700; margin-bottom: 12px; }
        .stat-value { font-family: 'Montserrat', sans-serif; font-size: 32px; font-weight: 900; color: var(--teal); text-shadow: 0 0 20px var(--teal-glow); display: flex; align-items: center; justify-content: center; gap: 6px; }
        .stat-unit { font-size: 14px; color: #fff; margin-top: 10px; font-family: 'Noto Sans TC'; font-weight: 700; }

        /* VIP 升級看板 */
        .vip-panel {
            margin: 0 20px 25px; padding: 18px 22px;
            background: linear-gradient(145deg, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0.02) 100%);
            border-radius: 24px; border: 1px solid var(--border);
            display: flex; justify-content: space-between; align-items: center;
        }
        .vip-info h3 { font-family: 'Montserrat', sans-serif; font-size: 18px; color: #ffcc00; margin-bottom: 4px; }
        .vip-badge { font-size: 12px; font-weight: 900; padding: 3px 10px; border-radius: 6px; border: 1px solid transparent; }
        .tag-ok { background: rgba(0, 255, 128, 0.1); color: #00ff80; border-color: rgba(0, 255, 128, 0.3); }
        .tag-no { background: rgba(255, 62, 96, 0.1); color: #ff3e60; border-color: rgba(255, 62, 96, 0.3); }
        
        /* 升級按鈕炫光 */
        .upgrade-btn {
            background: var(--gold); border: none; color: #000;
            padding: 12px 20px; border-radius: 14px; font-weight: 900; font-size: 14px;
            position: relative; overflow: hidden; box-shadow: 0 5px 20px rgba(255, 204, 0, 0.4);
        }
        .upgrade-btn::after {
            content: ''; position: absolute; top: -50%; left: -150%; width: 200%; height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.5), transparent);
            transform: rotate(45deg); animation: swipe 3s infinite;
        }
        @keyframes swipe { 0% { left: -150%; } 100% { left: 150%; } }

        /* 獎勵網格 */
        .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; padding: 0 20px; }
        .item {
            background: var(--card-bg); border: 1px solid var(--border); border-radius: 22px;
            padding: 22px 10px; text-align: center; transition: 0.3s; position: relative;
        }
        .item.today { border-color: var(--teal); background: rgba(0, 210, 190, 0.05); transform: scale(1.03); box-shadow: 0 0 25px rgba(0, 210, 190, 0.2); }
        
        .label { font-size: 13px; font-weight: 800; margin-bottom: 12px; display: block; color: var(--text-dim); }
        .label.today-lbl { color: var(--teal); font-weight: 900; }
        .label.tmr-lbl { background: rgba(255,255,255,0.1); padding: 1px 8px; border-radius: 6px; color: #fff; display: inline-block; }

        /* 鑽石 SVG */
        .dia-svg {
            width: 50px; height: 50px; margin: 0 auto 12px; display: block;
            filter: drop-shadow(0 0 12px var(--teal-glow));
        }
        .dia-svg path { fill: var(--teal); }

        .amt { font-family: 'Montserrat', sans-serif; font-size: 26px; font-weight: 900; color: #fff; margin-bottom: 18px; display: block; }

        /* CTA */
        .cta {
            width: 100%; border: none; padding: 10px 0; border-radius: 12px;
            font-size: 11px; font-weight: 900; text-transform: uppercase;
        }
        .btn-get { background: var(--teal); color: #000; font-weight: 900; box-shadow: 0 5px 15px var(--teal-glow); animation: breathe 2s infinite; }
        .btn-off { background: rgba(255,255,255,0.08); color: var(--text-dim); }
        .btn-lock { background: #1a1a1c; color: #444; border: 1px solid #333; }

        @keyframes breathe { 0%, 100% { transform: scale(1); } 50% { transform: scale(0.97); opacity: 0.9; } }
        .skeleton { height: 160px; background: rgba(255,255,255,0.05); border-radius: 22px; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 0.5; } 50% { opacity: 0.8; } }
    </style>
</head>
<body>

<div class="glow-overlay"></div>

<div class="header">
    <h1 id="t-main">登入領鑽石獎勵</h1>
    <div class="month-row">
        <div class="month-box" id="v-month">--</div>
        <div class="sub-title" id="t-sub">月連續簽到獎勵</div>
    </div>
</div>

<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-label" id="l-days">本月已領取</div>
        <div class="stat-value"><span id="v-days">--</span><span class="stat-unit" id="u-days">天</span></div>
    </div>
    <div class="stat-card">
        <div class="stat-label" id="l-total">總計已領取</div>
        <div class="stat-value">
            <svg style="width:26px; height:26px; margin-right:4px;" viewBox="0 0 24 24"><path fill="#00d2be" d="M12 22L2 9L12 2L22 9L12 22Z" /></svg>
            <span id="v-diamonds">--</span>
        </div>
    </div>
</div>

<div class="vip-panel">
    <div class="vip-info">
        <h3 id="v-vip-lv">VIP LV. --</h3>
        <div id="v-vip-tag" class="vip-badge">...</div>
    </div>
    <button class="upgrade-btn" id="v-upgrade-btn" style="display:none">立即升級</button>
</div>

<div class="grid" id="reward-grid">
    <div class="skeleton"></div><div class="skeleton"></div><div class="skeleton"></div>
</div>

<!-- 鑽石 SVG 模板 -->
<svg style="display:none">
    <symbol id="dia-icon" viewBox="0 0 24 24">
        <path d="M12 22L2 9L12 2L22 9L12 22Z" fill="#00d2be" />
        <path d="M12 2L2 9L12 12L22 9L12 2Z" fill="white" opacity="0.45" />
        <path d="M12 22L7 9L12 12L17 9L12 22Z" fill="black" opacity="0.15" />
    </symbol>
</svg>

<script>
    // 配置：請填寫您的 API URL
    const API_URL = "https://swag-user-login-api-905468082258.asia-east1.run.app/api/user_login_status";

    const REWARDS = [
        50, 50, 70, 50, 100, 60, 60, 90, 60, 130,
        70, 70, 110, 70, 160, 80, 80, 130, 80, 190,
        90, 90, 150, 90, 300
    ];

    const TXT = {
        l_days: "本月已領取", l_total: "總計已領取", days: "天",
        v_ok: "符合資格", v_no: "不符合資格", up: "立即升級",
        get: "簽到領鑽", today: "TODAY", tmr: "TOMORROW", done: "已領取", day: "DAY"
    };

    let user = { total_checkin_days: 0, vip_level: 0 };

    async function init() {
        const uid = new URLSearchParams(window.location.search).get('user_id') || 'test_user';
        try {
            const res = await fetch(`${API_URL}?user_id=${uid}`);
            user = await res.json();
        } catch (e) { console.error(e); }
        updateUI();
    }

    function updateUI() {
        // 月份
        const m = user.current_month ? new Date(user.current_month).getMonth() + 1 : new Date().getMonth() + 1;
        document.getElementById('v-month').innerText = m.toString().padStart(2, '0');

        // VIP
        const lv = user.vip_level || 0;
        const isOk = lv >= 10;
        document.getElementById('v-vip-lv').innerText = `VIP LV. ${lv}`;
        const b = document.getElementById('v-vip-tag');
        b.innerText = isOk ? TXT.v_ok : TXT.v_no;
        b.className = `vip-badge ${isOk ? 'tag-ok' : 'tag-no'}`;
        document.getElementById('v-upgrade-btn').style.display = isOk ? 'none' : 'block';
        document.getElementById('v-upgrade-btn').innerText = TXT.up;

        // 統計看板
        const claimed = user.total_checkin_days || 0;
        document.getElementById('v-days').innerText = claimed;
        let sum = 0;
        for(let i=0; i<claimed; i++) sum += REWARDS[i];
        document.getElementById('v-diamonds').innerText = sum;

        renderGrid(claimed, isOk);
    }

    function renderGrid(claimed, isOk) {
        const grid = document.getElementById('reward-grid');
        grid.innerHTML = '';

        REWARDS.forEach((amt, i) => {
            const d = i + 1;
            const item = document.createElement('div');
            
            let lClass = 'label';
            let lText = `${TXT.day} ${d}`;
            
            // 標籤判定
            if (d === claimed + 1) {
                item.className = 'item today';
                lClass = 'label today-lbl';
                lText = TXT.today;
            } else if (d === claimed + 2) {
                item.className = 'item';
                lClass = 'label tmr-lbl';
                lText = TXT.tmr;
            } else {
                item.className = 'item';
            }
            
            let btn = '';
            if (d <= claimed) {
                btn = `<button class="cta btn-off">${TXT.done}</button>`;
            } else if (d === claimed + 1) {
                btn = isOk ? `<button class="cta btn-get">${TXT.get}</button>` 
                           : `<button class="cta btn-lock">VIP 10+ 資格</button>`;
            } else {
                btn = `<div style="height:31px"></div>`;
            }

            item.innerHTML = `
                <span class="${lClass}">${lText}</span>
                <svg class="dia-svg"><use xlink:href="#dia-icon"></use></svg>
                <span class="amt">${amt}</span>
                ${btn}
            `;
            grid.appendChild(item);
        });
    }

    init();
</script>

</body>
</html>
